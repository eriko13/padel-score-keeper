<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Padel Score Keeper - quick team setup, live scoring, and history." />
  <title>Padel Score Keeper</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <a class="skip-link" href="#main">Skip to main content</a>
  <header class="top-bar">
    <button class="brand" aria-label="Padel Score Keeper" data-view="home">
      <div class="brand-mark" aria-hidden="true">
        <svg viewBox="0 0 64 64" role="img" aria-hidden="true">
          <circle cx="32" cy="32" r="32" class="mark-bg" />
          <circle cx="40" cy="24" r="12" class="mark-ball" />
          <rect x="14" y="14" width="24" height="36" rx="8" class="mark-frame" />
        </svg>
      </div>
      <span class="brand-name">Padel Score Keeper</span>
    </button>
  </header>

  <nav class="breadcrumb" aria-label="Breadcrumb">
    <button id="breadcrumb-back" class="ghost" aria-label="Go back">Back</button>
    <div id="breadcrumb-trail" class="breadcrumb-trail" aria-live="polite">Home</div>
  </nav>

  <main id="main">
    <section id="view-home" class="view" data-view="home" tabindex="-1">
      <div class="panel" id="plan-panel">
        <h1>Plan your day</h1>
        <p>Fill this once, then run your round robin.</p>
        <form id="plan-form" class="stack" aria-label="Plan the day">
          <label class="field">
            <span>Event name</span>
            <input id="plan-name" name="name" required autocomplete="off" placeholder="Saturday Padel" />
          </label>
          <label class="field">
            <span>Date and time</span>
            <input id="plan-date" name="date" type="datetime-local" />
          </label>
          <label class="field">
            <span>Location / court</span>
            <input id="plan-court" name="court" required placeholder="Court 1" />
          </label>
          <div class="field">
            <div class="field-label">Format</div>
            <select id="plan-format" name="format">
              <option value="best-of-3">Best of 3</option>
              <option value="single-set">Single set to 6</option>
            </select>
          </div>
          <label class="field checkbox">
            <input type="checkbox" id="plan-no-ad" name="noAd" />
            <span>No-ad scoring</span>
          </label>
          <label class="field">
            <span>Tournament type</span>
            <select id="plan-type" name="type">
              <option value="round-robin">Round robin (every team plays)</option>
            </select>
          </label>
          <label class="field">
            <span>Notes</span>
            <textarea id="plan-notes" name="notes" rows="3" placeholder="Balls, snacks, timing"></textarea>
          </label>
          <div class="field">
            <div class="field-label">Select players</div>
            <div id="plan-player-options" class="chips" aria-live="polite"></div>
            <div class="help-text">Pick an even number, at least 4.</div>
          </div>
          <div class="field">
            <div class="field-label">Add or remove players</div>
            <div class="stack">
              <label class="field">
                <span>Name</span>
                <input id="plan-player-name" name="playerName" autocomplete="off" placeholder="Player name" />
              </label>
              <label class="field">
                <span>Rating (optional)</span>
                <input id="plan-player-rating" name="playerRating" type="number" min="1" max="10" step="0.5" placeholder="7.5" />
              </label>
              <div class="actions-inline">
                <button type="button" class="secondary" id="plan-add-player">Add player</button>
                <div class="help-text">Players here sync with the roster.</div>
              </div>
              <ul id="plan-player-list" class="list" aria-live="polite"></ul>
            </div>
          </div>
          <div class="actions">
            <button type="submit" class="primary">Save plan</button>
            <button type="button" class="ghost" id="plan-reset">Reset</button>
          </div>
        </form>
      </div>

      <div class="panel hidden" id="plan-summary" aria-live="polite">
        <div class="panel-header">
          <h2>Plan summary</h2>
          <div class="actions-inline">
            <button class="secondary" id="plan-edit">Edit plan</button>
            <button class="ghost" id="plan-clear">Clear</button>
          </div>
        </div>
        <div class="summary-grid">
          <div>
            <div class="label">Event</div>
            <div id="summary-name" class="value"></div>
          </div>
          <div>
            <div class="label">Date & time</div>
            <div id="summary-date" class="value"></div>
          </div>
          <div>
            <div class="label">Court</div>
            <div id="summary-court" class="value"></div>
          </div>
          <div>
            <div class="label">Format</div>
            <div id="summary-format" class="value"></div>
          </div>
          <div>
            <div class="label">Tournament</div>
            <div id="summary-type" class="value"></div>
          </div>
          <div>
            <div class="label">Notes</div>
            <div id="summary-notes" class="value"></div>
          </div>
        </div>
        <div>
          <div class="label">Players</div>
          <div id="summary-players" class="chips"></div>
        </div>
        <div class="actions">
          <button class="primary" id="summary-generate">Generate teams</button>
          <button class="secondary" id="summary-start-next">Start next match</button>
          <button class="ghost" data-view="history">View history</button>
        </div>
      </div>

      <div class="panel hidden" id="schedule-panel">
        <div class="panel-header">
          <h3>Round robin schedule</h3>
          <div class="badge" id="schedule-count"></div>
        </div>
        <ul id="schedule-list" class="list"></ul>
        <div class="actions">
          <button class="primary" id="start-next-match">Start next pending</button>
          <button class="ghost" data-view="setup">Adjust teams</button>
        </div>
      </div>

      <div class="panel" aria-live="polite">
        <div class="panel-header">
          <h2>Recent matches</h2>
          <button class="text" data-action="refresh-history">Refresh</button>
        </div>
        <ul id="recent-matches" class="list"></ul>
      </div>
    </section>

    <section id="view-roster" class="view" data-view="roster" tabindex="-1">
      <div class="panel">
        <h2>Roster</h2>
        <form id="roster-form" class="stack" aria-label="Add player">
          <label class="field">
            <span>Name</span>
            <input id="player-name" name="name" required autocomplete="off" />
          </label>
          <label class="field">
            <span>Rating (optional)</span>
            <input id="player-rating" name="rating" type="number" min="1" max="10" step="0.5" />
          </label>
          <button type="submit" class="primary">Add player</button>
        </form>
      </div>
      <div class="panel">
        <div class="panel-header">
          <h3>Players</h3>
          <div class="badge" id="available-count" aria-live="polite"></div>
        </div>
        <ul id="roster-list" class="list" aria-live="polite"></ul>
      </div>
    </section>

    <section id="view-setup" class="view" data-view="setup" tabindex="-1">
      <div class="panel">
        <h2>Match setup</h2>
        <div class="stack">
          <div class="field">
            <div class="field-label">Format</div>
            <select id="match-format">
              <option value="best-of-3">Best of 3</option>
              <option value="single-set">Single set to 6</option>
            </select>
          </div>
          <div class="field">
            <div class="field-label">Court</div>
            <input id="match-court" placeholder="Court name or number" />
          </div>
          <div class="field checkbox">
            <label>
              <input type="checkbox" id="match-no-ad" />
              <span>No-ad scoring</span>
            </label>
          </div>
          <div class="field">
            <div class="field-label">Available players</div>
            <div id="available-players" class="chips" aria-live="polite"></div>
          </div>
          <div class="actions">
            <button class="secondary" id="generate-teams">Generate teams</button>
            <button class="ghost" id="reset-teams">Reset</button>
          </div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-header">
          <h3>Teams</h3>
          <button class="text" id="regenerate-names">Rename teams</button>
        </div>
        <div id="teams-container" class="grid"></div>
        <div class="actions">
          <button class="primary" id="start-match">Start match</button>
        </div>
      </div>
    </section>

    <section id="view-live" class="view" data-view="live" tabindex="-1">
      <div class="panel">
        <div class="panel-header">
          <h2>Live scoring</h2>
          <div id="live-court" class="badge"></div>
        </div>
        <div class="scoreboard" aria-live="polite">
          <div id="team-a" class="team-card" tabindex="0"></div>
          <div class="score-center">
            <div id="serve-indicator" class="serve-indicator" aria-label="Serve indicator" role="status"></div>
            <div class="set-scores" id="set-scores"></div>
            <div class="controls">
              <button class="primary" data-score="A">+ Point A</button>
              <button class="primary" data-score="B">+ Point B</button>
              <button class="secondary" data-undo>Undo</button>
              <button class="secondary" data-redo>Redo</button>
            </div>
          </div>
          <div id="team-b" class="team-card" tabindex="0"></div>
        </div>
        <div class="actions">
          <button class="ghost" id="end-match">End match</button>
        </div>
      </div>
      <div class="panel">
        <div class="panel-header">
          <h3>Event log</h3>
          <button class="text" id="clear-log">Clear</button>
        </div>
        <ol id="event-log" class="list"></ol>
      </div>
    </section>

    <section id="view-history" class="view" data-view="history" tabindex="-1">
      <div class="panel">
        <div class="panel-header">
          <h2>Match history</h2>
          <div class="actions-inline">
            <button class="text" id="export-csv">Export CSV</button>
            <button class="text" id="copy-summary">Copy summary</button>
          </div>
        </div>
        <div class="field">
          <label>
            <span>Filter by player</span>
            <input id="history-filter" placeholder="Type a name" />
          </label>
        </div>
        <ul id="history-list" class="list" aria-live="polite"></ul>
      </div>
    </section>

  </main>

  <dialog id="modal" aria-label="Modal dialog">
    <div id="modal-body"></div>
    <div class="actions">
      <button class="ghost" id="modal-close">Close</button>
    </div>
  </dialog>

  <template id="chip-template">
    <button class="chip" type="button"></button>
  </template>

  <script type="module" src="./js/ui.js"></script>
</body>
</html>
